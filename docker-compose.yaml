peer:
  image: peerimage
  image: peerimage:latest
  environment:
    # Set your Onyx tenancy id, used to run multiple clusters on the same ZK ensemble
    ONYX_ID: 1
    # Number of Onyx peers (execution units) to run inside this container
    NPEERS: 8
    TWITTER_CONSUMER_KEY: ""
    TWITTER_CONSUMER_SECRET: ""
    TWITTER_ACCESS_TOKEN: ""
    TWITTER_ACCESS_SECRET: ""
    # JVM options for the media driver, defaults to '-server'
    MEDIA_DRIVER_JAVA_OPTS: ''
    # JVM options of the peer, defaults to '-server -G1GC'
    PEER_JAVA_OPTS: ''
    ZOOKEEPER_ADDR: 'zookeeper:2181'
  shm_size: "512mb"
  links:
    - zookeeper:zookeeper
    - mysql:mysql
    - bookkeepera:bookkeepera
    - bookkeeperb:bookkeeperb
    - bookkeeperc:bookkeeperc
zookeeper:
  image: onyxplatform/zookeeper:alpha
  ports:
    - '2181:2181'

mysql:
  image: 'tutum/mysql'
  ports:
    - '3306:3306'
  environment:
    ON_CREATE_DB: "onyx"
    MYSQL_PASS: "mypass"

bookkeepera:
  image: onyxplatform/bookkeeper:alpha
  ports:
    - '3181:3181'
  environment:
    BOOKKEEPER_ZOOKEEPER_CONNECT: zookeeper:2181
  links:
    - zookeeper:zookeeper

bookkeeperb:
  image: onyxplatform/bookkeeper:alpha
  ports:
    - '3182:3182'
  environment:
    BOOKKEEPER_ZOOKEEPER_CONNECT: zookeeper:2181
  links:
    - zookeeper:zookeeper

bookkeeperc:
  image: onyxplatform/bookkeeper:alpha
  ports:
    - '3183:3183'
  environment:
    BOOKKEEPER_ZOOKEEPER_CONNECT: zookeeper:2181
  links:
    - zookeeper:zookeeper
